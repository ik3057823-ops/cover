<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Fire Safety Training â€” Cover</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap" rel="stylesheet">
  <style>
    :root {
      --bg: #0f172a;          /* slate-900 */
      --card: #111827;        /* gray-900 */
      --muted: #94a3b8;       /* slate-400 */
      --text: #e5e7eb;        /* gray-200 */
      --accent: #ef4444;      /* red-500 */
      --accent-600: #dc2626;  /* red-600 */
      --ring: rgba(239, 68, 68, 0.35);
    }

    body {
      margin: 0;
      background: radial-gradient(1200px 800px at 20% 10%, rgba(239,68,68,.08), transparent 50%),
                  radial-gradient(1000px 600px at 80% 90%, rgba(59,130,246,.08), transparent 50%),
                  var(--bg);
      font-family: 'Inter', system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, sans-serif;
      color: var(--text);
      display: grid; place-items: center;
      height: 100vh;            /* lock to viewport height */
      overflow: hidden;         /* prevent scrolling */
      padding: 12px 0;          /* little space above & below */
    }

    .card {
      width: min(92vw, 820px);
      background: linear-gradient(180deg, rgba(255,255,255,0.04), rgba(255,255,255,0.02));
      border: 1px solid rgba(255,255,255,0.08);
      backdrop-filter: blur(6px);
      border-radius: 20px;
      box-shadow: 0 20px 60px rgba(0,0,0,0.45);
      overflow: hidden;
      animation: fadeIn .6s ease both;
    }

    header { position: relative; overflow: hidden; }

    .hero {
      height: 340px;
      background-image: url('https://raw.githubusercontent.com/ik3057823-ops/images-5/main/fire%203.png');
      background-size: 110%; /* start slightly zoomed-in */
      background-position: center 78%; /* visible ground */
      background-repeat: no-repeat;
      background-color: #0b0f1a;
      transition: background-size 0.6s ease;
    }
    .hero:hover, .hero:focus-visible { background-size: 100%; outline: none; }
    @media (prefers-reduced-motion: reduce) { .hero { transition: none; } }

    .content { padding: 24px clamp(16px, 4vw, 28px) 28px; text-align: center; }

    h1 {
      margin: 0 0 10px;
      font-family: 'Press Start 2P', monospace;
      text-transform: uppercase;
      font-size: clamp(22px, 3.2vw, 34px);
      line-height: 1.3;
      letter-spacing: 0.04em;
    }

    .subtitle {
      margin: 0 auto 22px; max-width: 60ch; color: var(--muted);
      font-family: 'Press Start 2P', monospace;
      font-size: clamp(11px, 1.6vw, 14px);
      line-height: 1.8; letter-spacing: 0.02em; text-transform: none;
    }

    .meta {
      display: inline-flex; gap: 10px; align-items: center;
      padding: 12px 16px; border-radius: 0;
      background: rgba(239,68,68,0.08);
      border: 3px solid rgba(255,255,255,0.18);
      box-shadow: 0 0 0 2px rgba(0,0,0,0.55) inset;
      margin: 0 auto 26px;
    }
    .meta svg { width: 20px; height: 20px; flex: 0 0 20px; }
    .meta span { font-family: 'Press Start 2P', monospace; font-weight: 400; letter-spacing: 0.04em; font-size: 12px; }

    .actions { display: flex; justify-content: center; gap: 12px; }

    .btn-start {
      appearance: none; border: 0; padding: 16px 28px; border-radius: 0; /* pixel look */
      background: var(--accent); color: #fff; font-family: 'Press Start 2P', monospace;
      font-weight: 400; text-transform: uppercase; font-size: 14px; letter-spacing: 0.06em;
      cursor: pointer; box-shadow: 0 6px 0 var(--accent-600), 0 0 0 3px rgba(0,0,0,0.65);
      transition: transform .06s ease, box-shadow .06s ease, filter .15s ease;
    }
    .btn-start:focus-visible { outline: 3px solid #fff; outline-offset: 2px; }
    .btn-start:hover { filter: brightness(1.03); }
    .btn-start:active { transform: translateY(6px); box-shadow: 0 0 0 var(--accent-600), 0 0 0 3px rgba(0,0,0,0.65); }

    footer { padding: 24px 0 6px; text-align: center; color: var(--muted); font-size: 12px; }

    @keyframes fadeIn { from { opacity: 0; transform: translateY(8px); } to { opacity: 1; transform: translateY(0); } }

    /* Floating circular audio toggle (bottom-right) */
    .audio-fab {
      position: fixed; right: 24px; bottom: 24px;
      width: 72px; height: 72px;
      border-radius: 50%; border: 0;
      background: rgba(31,41,55,0.98); color: var(--text);
      box-shadow: 0 14px 28px rgba(0,0,0,0.45), 0 0 0 4px rgba(0,0,0,0.65) inset, 0 0 0 2px rgba(255,255,255,0.06) inset;
      display: grid; place-items: center; cursor: pointer;
      transition: transform .06s ease, filter .15s ease; z-index: 50;
      font-family: 'Press Start 2P', monospace; font-size: 26px; line-height: 1;
      image-rendering: pixelated; text-rendering: optimizeSpeed;
    }
    .audio-fab:hover { filter: brightness(1.06); }
    .audio-fab:active { transform: translateY(1px) scale(0.98); }
    .audio-fab[aria-pressed="true"] { background: #374151; }

    /* Toast */
    .toast {
      position: fixed; left: 50%; bottom: 20px; transform: translateX(-50%);
      background: rgba(15,23,42,0.95); color: var(--text); border: 1px solid rgba(255,255,255,0.12);
      padding: 10px 14px; border-radius: 10px; font-size: 12px; box-shadow: 0 10px 24px rgba(0,0,0,0.45);
      display: none; z-index: 60;
    }
    html { height: 100%; overflow: hidden; }
</style>
</head>
<body>
  <main class="card" role="main" aria-labelledby="title">
    <header class="hero" tabindex="0" role="img" aria-label="Fire safety training hero image"></header>

    <div class="content">
      <h1 id="title">Fire Safety Training Quiz</h1>
      <p class="subtitle">This quiz assesses workplace fire safety. Choose the best answer for each question. You may review and change your selections before submitting.</p>

      <div class="meta" aria-label="Estimated time">
        <!-- Accessible clock icon (inline SVG) -->
        <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" aria-hidden="true">
          <circle cx="12" cy="12" r="9" stroke="currentColor" stroke-width="1.8" opacity="0.9"/>
          <path d="M12 7v5l3 2" stroke="currentColor" stroke-width="1.8" stroke-linecap="round" stroke-linejoin="round"/>
        </svg>
        <span>20 minutes</span>
      </div>

      <div class="actions">
        <button class="btn-start" id="startBtn" type="button" aria-label="Start training">Start</button>
      </div>
    </div>

    <footer>
      <small>Â© <span id="year"></span> Fire Safety Training</small>
    </footer>
  </main>

  <!-- Background audio (hidden) -->
  <audio id="bgm" loop preload="auto" autoplay playsinline crossorigin="anonymous" style="display:none">
    <source src="https://raw.githubusercontent.com/ik3057823-ops/office/main/office.mp3" type="audio/mpeg" />
    <source src="https://ik3057823-ops.github.io/office/office.mp3" type="audio/mpeg" />
  </audio>
  <!-- Floating audio toggle button -->
  <button class="audio-fab" id="audioFab" aria-label="Toggle sound" aria-pressed="false" title="Toggle sound">ðŸ”Š</button>

  <script>
    (function () {
      document.addEventListener('DOMContentLoaded', function () {
        // ===== Self-tests (do not remove) =====
        console.assert(document.getElementById('audioFab'), 'TEST FAIL: audioFab button missing in DOM');
        console.assert(document.getElementById('bgm'), 'TEST FAIL: bgm <audio> missing in DOM');
        console.assert(document.getElementById('startBtn'), 'TEST FAIL: startBtn missing in DOM');
        console.assert(document.getElementById('year'), 'TEST FAIL: year span missing in DOM');
        // Added tests
        var _bgmEl = document.getElementById('bgm');
        console.assert(_bgmEl && _bgmEl.querySelectorAll('source').length >= 1, 'TEST FAIL: audio sources missing');
        console.assert(typeof HTMLAudioElement !== 'undefined', 'TEST FAIL: HTMLAudioElement not available');
        // ======================================

        // Year stamp
        var yearEl = document.getElementById('year');
        if (yearEl) yearEl.textContent = new Date().getFullYear();

        var startBtn = document.getElementById('startBtn');
        var audioFab = document.getElementById('audioFab');
        var bgm = document.getElementById('bgm');

        // Lightweight toast for errors/info
        var toast = document.createElement('div');
        toast.className = 'toast';
        document.body.appendChild(toast);
        function showToast(msg) {
          toast.textContent = msg; toast.style.display = 'block';
          clearTimeout(showToast._t);
          showToast._t = setTimeout(function(){ toast.style.display = 'none'; }, 3000);
        }

        function setFab() {
          if (!audioFab || !bgm) return;
          var on = !bgm.muted && !bgm.paused;
          audioFab.textContent = on ? 'ðŸ”Š' : 'ðŸ”‡';
          audioFab.setAttribute('aria-pressed', on ? 'false' : 'true');
        }

        function tryPlay() {
          if (!bgm) return Promise.reject(new Error('No audio element'));
          try {
            bgm.muted = false; // ensure unmuted from the start
            bgm.volume = 0.15; // modest level
            return bgm.play();
          } catch (e) {
            return Promise.reject(e);
          }
        }

        // Extra test: tryPlay exists
        console.assert(typeof tryPlay === 'function', 'TEST FAIL: tryPlay function missing');

        // Listen for load/error events to help debug
        if (bgm) {
          bgm.addEventListener('error', function(){ showToast('Audio failed to load. Check URL or CORS.'); });
          bgm.addEventListener('playing', function(){ showToast('Audio playing'); setFab(); });
          bgm.addEventListener('play', function(){ setFab(); });
          bgm.addEventListener('pause', function(){ setFab(); });
        }

        // Attempt to auto start unmuted; if blocked, start on first user interaction anywhere
        bgm.muted = false; // request unmuted
        tryPlay().catch(function () {
          var resume = function () {
            tryPlay().catch(function(){});
            document.removeEventListener('pointerdown', resume);
          };
          document.addEventListener('pointerdown', resume, { once: true });
        }).finally(setFab);

        if (audioFab) {
          audioFab.addEventListener('click', function () {
            if (!bgm) return;
            bgm.muted = !bgm.muted;
            if (!bgm.muted && bgm.paused) { tryPlay().catch(function(){ showToast('Tap to allow audio'); }); }
            setFab();
          });
        }

        if (startBtn) {
          startBtn.addEventListener('click', function () { alert('Starting Fire Safety Training...'); });
        }

        // Initialize icon state
        setFab();
      });
    })();
  </script>
</body>
</html>
